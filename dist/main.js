(()=>{"use strict";(()=>{function e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function t(t){for(var r=1;r<arguments.length;r++){var i=null!=arguments[r]?arguments[r]:{};r%2?e(Object(i),!0).forEach((function(e){n(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):e(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r,i,o=function(e,t,n){n.removeAttribute("disabled"),e.setAttribute("draggable",!0),t.classList.remove("edit_active")},c=function(e,t){var n='\n  <li id="'.concat(e.index,'" class="task" draggable="true">\n    <article>\n    <div class="todo__task">\n      <input class="task_checkbox" type="checkbox" ').concat(e.isCompleted&&"checked",' />\n      <p class="').concat(e.isCompleted&&"line_through",'">').concat(e.description,'</p>\n      <input class="task_description" value="').concat(e.description,'" />\n    </div>\n      <div class="task_options">\n        <i class="fa-solid fa-pen-to-square edit-option-icon"></i>\n        <i class="fa-solid fa-trash-can delete-option-icon"></i>\n      </div>\n    </article>\n  </li>\n  ');t.insertAdjacentHTML("beforeend",n)};function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u=function(e){r=e.target.closest("li")},d=function(e){e.preventDefault()},f=function(e){e.target.closest("article").classList.add("drag_over")},p=function(e){e.target.closest("article").classList.remove("drag_over")};const g=function(e,t,n){e.addEventListener("dragstart",u),e.addEventListener("dragover",d),e.addEventListener("drop",(function(e){!function(e,t){var n=e.target.closest("li");!function(e,t,n){var r,o,c=document.querySelectorAll("ul li"),a=document.getElementById("tasksList");c.forEach((function(n,i){n===e&&(r=i),n===t&&(o=i)})),r>o?(c.item(o).insertAdjacentElement("beforebegin",e),c.item(r).insertAdjacentElement("afterend",t)):(c.item(o).insertAdjacentElement("afterend",e),c.item(r).insertAdjacentElement("beforebegin",t));var l=i.splice(r,1)[0];i.splice(o,0,l),i=i.map((function(e,t){return s(s({},e),{},{index:t+1})})),localStorage.setItem("todo",JSON.stringify(i)),a.innerHTML="",n()}(r,n,t),e.target.closest("article").classList.remove("drag_over")}(e,n)})),e.addEventListener("dragenter",f),e.addEventListener("dragleave",p),i=t};function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){O(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m,y=document.getElementById("tasksList"),j=document.getElementById("clear-list"),h=document.querySelector("form"),E=function(e,n){var r=e.querySelector(".task_checkbox"),i=e.querySelector(".delete-option-icon"),c=e.querySelector(".edit-option-icon"),a=e.querySelector(".task_description"),s=e.querySelector("p");r.addEventListener("change",(function(){!function(e,t,n,r){r.find((function(t){return t.index===parseInt(e.id,10)})).isCompleted=n.checked,localStorage.setItem("todo",JSON.stringify(r)),t.classList.toggle("line_through")}(e,s,r,m)})),i.addEventListener("click",(function(){!function(e,n,r,i){var o=r.filter((function(t){return t.index!==parseInt(e.id,10)}));r=o.map((function(e,n){return t(t({},e),{},{index:n+1})})),localStorage.setItem("todo",JSON.stringify(r)),n.innerHTML="",i()}(e,y,m,n)})),c.addEventListener("click",(function(){!function(e,t,n,r,i){!function(e,t,n){t.classList.add("edit_active"),t.style.width="".concat(e.offsetWidth,"px"),t.style.height="".concat(e.offsetHeight+1,"px"),n.setAttribute("disabled",!0),e.setAttribute("draggable",!1)}(e,t,n),function(e){var t=e.value.length;if(e.setSelectionRange)e.focus(),e.setSelectionRange(t,t);else if(e.createTextRange){var n=e.createTextRange();n.collapse(!0),n.moveEnd("character",t),n.moveStart("character",t),n.select()}}(t),t.addEventListener("keypress",(function(c){if("Enter"===c.key){var a=t.value;i.find((function(t){return t.index===parseInt(e.id,10)})).description=a,localStorage.setItem("todo",JSON.stringify(i)),r.textContent=a,o(e,t,n)}})),document.addEventListener("click",(function(i){i.target.closest("li")!==e&&(t.value=r.textContent,o(e,t,n))}))}(e,a,r,s,m)}))},S=function e(){(m=JSON.parse(localStorage.getItem("todo"))||[]).forEach((function(t){c(t,y),E(y.lastElementChild,e),g(y.lastElementChild,m,e)}))};S(),h.addEventListener("submit",(function(e){e.preventDefault();var t={description:h["task-description"].value.trim(),isCompleted:!1,index:m.length+1};!function(e,t){t.push(e),localStorage.setItem("todo",JSON.stringify(t))}(t,m),c(t,y),E(y.lastElementChild,S),g(y.lastElementChild,m,S),h.reset()})),function(e){j.addEventListener("click",(function(){var t=m.filter((function(e){return!e.isCompleted}));m=t.map((function(e,t){return v(v({},e),{},{index:t+1})})),localStorage.setItem("todo",JSON.stringify(m)),y.innerHTML="",e()}))}(S)})()})();